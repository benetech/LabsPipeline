<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="chrome=1">
		<title>Labs Pipeline by benetech</title>
		<LINK href="stylesheets/jquery.dataTables.min.css" rel="stylesheet" type="text/css">
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
		<script src="javascripts/papaparse.min.js"></script>
		<script src="javascripts/jquery.dataTables.min.js"></script>
		
		<script>
			var data;
			var ideas = [];
			
			Papa.parse("https://benetech.github.io/LabsPipeline/data/pipe.csv", 
				{
					download: true,
					skipEmptyLines: true,
					delimiter: ",",
					header: true,
					complete: function(results){data = results.data; transformData();}
				});
				
		</script>
			
	</head>
	 
	<body>
		
		<h1> Benetech Labs Idea Pipeline </h1>
		
		<table id="example" class="display" align="center" width="80%" data-order='[[2, "asc"]]' data-page-length='50'></table>
		
		<script>
		
		function transformData(){
			var data_length = data.length;
			console.log(data_length);
					
			for(var i = 0; i < data_length; i++)
				{
					ideas.push([data[i].Key,data[i].Summary,data[i].Status,data[i].Created,data[i].Description]);
				}
				
			$(document).ready(function() {	
				$('#example').DataTable( {
					data: ideas,
					columns: [
						{ title: "Key" },
						{ title: "Summary" },
						{ title: "Status" },
						{ title: "Created" },
						{ title: "Description" }
					]
				} );
				
			} );	
				
			}
		</script>

	</body>
 
</html>
