<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="chrome=1">
		<title>Labs Pipeline by benetech</title>
		<LINK href="stylesheets/jquery.dataTables.min.css" rel="stylesheet" type="text/css">
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
		<script src="javascripts/jquery.csv.min.js"></script>
		<script src="javascripts/jquery.dataTables.min.js"></script>
		
		<script>
			var results;
			
			jQuery.get("https://benetech.github.io/LabsPipeline/data/pipe.csv",function(data){
				results = data;	
				transformData();
			});
					
				
		</script>
			
	</head>
	 
	<body>
		
		<h1> Benetech Labs Idea Pipeline </h1>
		
		<table id="example" class="display" align="center" width="100%" data-page-length='25'></table>
		
		<script>
			var ideas;
			var clean=[];
			
			function transformData(){
						
				results = results.substring(results.indexOf("\n") + 1);
				results = results.substring(results.indexOf("\n") + 1);
				results = results.substring(results.indexOf("\n") + 1);
				results = results.substring(results.indexOf("\n") + 1);
				results = results.substring(0,results.lastIndexOf("\n"));
				results = results.substring(0,results.lastIndexOf("\n"));
				
				function cleanData(results){
				for (var i =0; i < results.length; i++){
					clean.push([results[i][1],results[i][2],results[i][4],results[i][5],results[i][16]]);
				}
				}
				
				cleanData(results);
				
				
				ideas = $.csv.toArrays(clean);			
					
				$(document).ready(function() {	
					$('#example').DataTable( {
						data: ideas,
						columns: [
							{ title: "Key" },
							{ title: "Summary" },
							{ title: "Status" },
							{ title: "Created" },
							{ title: "Description" }
						]
					} );
					
				} );	
			} 
		</script>

	</body>
 
</html>
